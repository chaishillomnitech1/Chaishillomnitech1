name: Stale Issues and PRs

on:
  schedule:
    # Run daily at 00:00 UTC
    - cron: '0 0 * * *'
  workflow_dispatch:

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    
    steps:
      - name: Mark and close stale issues and PRs
        uses: actions/stale@v9
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          
          # Issue configuration
          stale-issue-message: |
            ğŸ‘‹ This issue has been automatically marked as stale because it has not had recent activity.
            
            It will be closed if no further activity occurs within the next 7 days.
            
            If you believe this issue is still relevant:
            - Add a comment explaining why
            - Add the 'keep-open' label
            - Reference it in active work
            
            Thank you for your contributions to ScrollVerse! ğŸ™
          
          close-issue-message: |
            ğŸ”’ This issue has been automatically closed due to inactivity.
            
            If you believe this issue should be reopened:
            - Comment with additional context
            - Create a new issue with updated information
            - Reference this issue in your new submission
            
            Thank you for your contributions! ğŸš€
          
          # PR configuration
          stale-pr-message: |
            ğŸ‘‹ This pull request has been automatically marked as stale because it has not had recent activity.
            
            It will be closed if no further activity occurs within the next 14 days.
            
            If you're still working on this:
            - Add a comment with an update
            - Push new commits
            - Request a review
            - Add the 'keep-open' label
            
            Thank you for your contributions to ScrollVerse! ğŸ™
          
          close-pr-message: |
            ğŸ”’ This pull request has been automatically closed due to inactivity.
            
            If you'd like to continue this work:
            - Rebase your branch on the latest main
            - Open a new PR
            - Reference this PR in your description
            
            Thank you for your contributions! ğŸš€
          
          # Days before marking as stale
          days-before-stale: 60
          days-before-close: 7
          days-before-pr-stale: 30
          days-before-pr-close: 14
          
          # Labels
          stale-issue-label: 'stale'
          stale-pr-label: 'stale'
          exempt-issue-labels: 'keep-open,pinned,security,critical,in-progress'
          exempt-pr-labels: 'keep-open,in-review,work-in-progress'
          exempt-milestones: true
          exempt-all-milestones: true
          
          # Only mark issues/PRs with no activity
          operations-per-run: 100
          remove-stale-when-updated: true
          
          # Assignees
          exempt-assignees: true
          
          # Debug
          debug-only: false
